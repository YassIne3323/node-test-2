const emojiList_easy = [
  { emoji: "ğŸˆ", name: "Ù‚Ø·Ø©" },
  { emoji: "ğŸ¥·ğŸ»", name: "Ù†ÙŠÙ†Ø¬Ø§" },
  { emoji: "ğŸ‘½", name: "ÙØ¶Ø§Ø¦ÙŠ" },
  { emoji: "ğŸ”¥", name: "Ù†Ø§Ø±" },
  { emoji: "â˜•", name: "Ù‚Ù‡ÙˆÙ‰" },
  { emoji: "â­", name: "Ù†Ø¬Ù…Ø©" },
  { emoji: "â˜€ï¸", name: "Ø´Ù…Ø³" },
  { emoji: "ğŸŒ™", name: "Ù‡Ù„Ø§Ù„" },
  { emoji: "ğŸ¦‹", name: "ÙØ±Ø§Ø´Ø©" },
  { emoji: "âœˆï¸", name: "Ø·Ø§Ø¦Ø±Ø©" },
  { emoji: "ğŸ¦â€â¬›", name: "ØºØ±Ø§Ø¨" },
  { emoji: "ğŸ", name: "Ù‡Ø¯ÙŠØ©" },
  { emoji: "ğŸ", name: "ØªÙØ§Ø­Ø©" },
  { emoji: "ğŸ", name: "Ù†Ø­Ù„Ø©" },
  { emoji: "ğŸ´", name: "Ø­ØµØ§Ù†" },
  { emoji: "ğŸª¿", name: "Ø¨Ø·Ø©" },
  { emoji: "ğŸ—¿", name: "ØµÙ†Ù…" }
];

const emojiList_normal = [
  { emoji: "ğŸ¦‡", name: "Ø®ÙØ§Ø´" },
  { emoji: "ğŸ¦“", name: "Ø­Ù…Ø§Ø± ÙˆØ­Ø´ÙŠ" },
  { emoji: "ğŸ¦ˆ", name: "Ù‚Ø±Ø´" },
  { emoji: "âš½", name: "ÙƒØ±Ø© Ù‚Ø¯Ù…" },
  { emoji: "ğŸ¦¨", name: "Ù‚Ù†ÙØ°" },
  { emoji: "ğŸ¦š", name: "Ø·Ø§ÙˆÙˆØ³" },
  { emoji: "ğŸ¦‡", name: "Ø®ÙØ§Ø´" },
  { emoji: "ğŸ¦˜", name: "ÙƒÙ†ØºØ±" },
  { emoji: "ğŸ‘¨ğŸ»â€ğŸ¦¯", name: "Ø§Ø¹Ù…Ù‰" },
  { emoji: "ğŸ¿", name: "ÙØ´Ø§Ø±" },
  { emoji: "ğŸ«€", name: "Ù‚Ù„Ø¨" },
  { emoji: "ğŸ‘»", name: "Ø´Ø¨Ø­" },
  { emoji: "ğŸ‘ï¸", name: "Ø¹ÙŠÙ†" },
  { emoji: "ğŸ—¡", name: "Ø³ÙŠÙ" },
  { emoji: "ğŸ›¡", name: "Ø¯Ø±Ø¹" },
  { emoji: "ğŸ’£", name: "Ù‚Ù†Ø¨Ù„Ø©" },
  { emoji: "ğŸ„", name: "ÙØ·Ø±" },
  { emoji: "ğŸ¦Š", name: "Ø«Ø¹Ù„Ø¨" },
  { emoji: "âš–ï¸", name: "Ù…ÙŠØ²Ø§Ù†" },
  { emoji: "ğŸ®", name: "ÙŠØ¯ ØªØ­ÙƒÙ…" },
  { emoji: "ğŸ¦", name: "Ø±Ø§ÙƒÙˆÙ†" }
];

const emojiList_High = [
  { emoji: "ğŸª„", name: "Ø¹ØµØ§ Ø³Ø­Ø±ÙŠØ©" },
  { emoji: "ğŸ¦©", name: "Ø·Ø§Ø¦Ø± Ø§Ù„ÙÙ„Ø§Ù…Ù†Ø¬Ùˆ" },
  { emoji: "ğŸ§¬", name: "Ø­Ù…Ø¶ Ù†ÙˆÙˆÙŠ" },
  { emoji: "ğŸ”­", name: "ØªÙ„ÙŠØ³ÙƒÙˆØ¨" },
  { emoji: "ğŸŸï¸", name: "Ù…Ù„Ø¹Ø¨ ÙƒØ±Ø© Ø§Ù„Ù‚Ø¯Ù…" },
  { emoji: "ğŸªµ", name: "Ø¬Ø°Ø¹ Ø´Ø¬Ø±Ø©" },
  { emoji: "ğŸ¦", name: "ÙˆØ­ÙŠØ¯ Ø§Ù„Ù‚Ø±Ù†" },
  { emoji: "ğŸ§²", name: "Ù…ØºÙ†Ø§Ø·ÙŠØ³" },
  { emoji: "ğŸ™", name: "ÙƒØ±Ø© Ø£Ø±Ø²" },
  { emoji: "ğŸ¦­", name: "ÙÙ‚Ù…Ø©" },
  { emoji: "ğŸ«™", name: "Ø¹Ù„Ø¨Ø© ÙØ§Ø±ØºØ©" },
  { emoji: "ğŸª›", name: "Ù…ÙÙƒ Ø¨Ø±Ø§ØºÙŠ" },
  { emoji: "ğŸ”§", name: "Ù…ÙØªØ§Ø­ Ø±Ø¨Ø·" },
  { emoji: "ğŸ§°", name: "ØµÙ†Ø¯ÙˆÙ‚ Ø£Ø¯ÙˆØ§Øª" },
  { emoji: "âš™ï¸", name: "ØªØ±Ø³" },
  { emoji: "ğŸ”¨", name: "Ù…Ø·Ø±Ù‚Ø©" },
  { emoji: "ğŸ’»", name: "Ø­Ø§Ø³ÙˆØ¨ Ù…Ø­Ù…ÙˆÙ„" },
  { emoji: "ğŸ“±", name: "Ù‡Ø§ØªÙ Ù…Ø­Ù…ÙˆÙ„" }
];

const emojiList_banner = [
  { emoji: "ğŸ‡²ğŸ‡¦", name: "Ø§Ù„Ù…ØºØ±Ø¨" },
  { emoji: "ğŸ‡©ğŸ‡¿", name: "Ø§Ù„Ø¬Ø²Ø§Ø¦Ø±" },
  { emoji: "ğŸ‡¹ğŸ‡³", name: "ØªÙˆÙ†Ø³" },
  { emoji: "ğŸ‡±ğŸ‡¾", name: "Ù„ÙŠØ¨ÙŠØ§" },
  { emoji: "ğŸ‡ªğŸ‡¬", name: "Ù…ØµØ±" },
  { emoji: "ğŸ‡¸ğŸ‡©", name: "Ø§Ù„Ø³ÙˆØ¯Ø§Ù†" },
  { emoji: "ğŸ‡²ğŸ‡·", name: "Ù…ÙˆØ±ÙŠØªØ§Ù†ÙŠØ§" },
  { emoji: "ğŸ‡¸ğŸ‡¦", name: "Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©" },
  { emoji: "ğŸ‡¸ğŸ‡¾", name: "Ø³ÙˆØ±ÙŠØ§" },
  { emoji: "ğŸ‡±ğŸ‡§", name: "Ù„Ø¨Ù†Ø§Ù†" },
  { emoji: "ğŸ‡®ğŸ‡¶", name: "Ø§Ù„Ø¹Ø±Ø§Ù‚" },
  { emoji: "ğŸ‡µğŸ‡¸", name: "ÙÙ„Ø³Ø·ÙŠÙ†" },
  { emoji: "ğŸ‡¯ğŸ‡´", name: "Ø§Ù„Ø£Ø±Ø¯Ù†" },
  { emoji: "ğŸ‡°ğŸ‡¼", name: "Ø§Ù„ÙƒÙˆÙŠØª" },
  { emoji: "ğŸ‡¶ğŸ‡¦", name: "Ù‚Ø·Ø±" },
  { emoji: "ğŸ‡§ğŸ‡­", name: "Ø§Ù„Ø¨Ø­Ø±ÙŠÙ†" },
  { emoji: "ğŸ‡¦ğŸ‡ª", name: "Ø§Ù„Ø¥Ù…Ø§Ø±Ø§Øª" },
  { emoji: "ğŸ‡´ğŸ‡²", name: "Ø¹ÙÙ…Ø§Ù†" },
  { emoji: "ğŸ‡¾ğŸ‡ª", name: "Ø§Ù„ÙŠÙ…Ù†" },
  { emoji: "ğŸ‡ºğŸ‡¸", name: "Ø§Ù„ÙˆÙ„Ø§ÙŠØ§Øª Ø§Ù„Ù…ØªØ­Ø¯Ø©" },
  { emoji: "ğŸ‡¨ğŸ‡¦", name: "ÙƒÙ†Ø¯Ø§" },
  { emoji: "ğŸ‡²ğŸ‡½", name: "Ø§Ù„Ù…ÙƒØ³ÙŠÙƒ" },
  { emoji: "ğŸ‡§ğŸ‡·", name: "Ø§Ù„Ø¨Ø±Ø§Ø²ÙŠÙ„" },
  { emoji: "ğŸ‡¦ğŸ‡·", name: "Ø§Ù„Ø£Ø±Ø¬Ù†ØªÙŠÙ†" },
  { emoji: "ğŸ‡¨ğŸ‡´", name: "ÙƒÙˆÙ„ÙˆÙ…Ø¨ÙŠØ§" },
  { emoji: "ğŸ‡¬ğŸ‡§", name: "Ø§Ù„Ù…Ù…Ù„ÙƒØ© Ø§Ù„Ù…ØªØ­Ø¯Ø©" },
  { emoji: "ğŸ‡«ğŸ‡·", name: "ÙØ±Ù†Ø³Ø§" },
  { emoji: "ğŸ‡©ğŸ‡ª", name: "Ø£Ù„Ù…Ø§Ù†ÙŠØ§" },
  { emoji: "ğŸ‡®ğŸ‡¹", name: "Ø¥ÙŠØ·Ø§Ù„ÙŠØ§" },
  { emoji: "ğŸ‡ªğŸ‡¸", name: "Ø¥Ø³Ø¨Ø§Ù†ÙŠØ§" },
  { emoji: "ğŸ‡µğŸ‡¹", name: "Ø§Ù„Ø¨Ø±ØªØºØ§Ù„" },
  { emoji: "ğŸ‡³ğŸ‡±", name: "Ù‡ÙˆÙ„Ù†Ø¯Ø§" },
  { emoji: "ğŸ‡§ğŸ‡ª", name: "Ø¨Ù„Ø¬ÙŠÙƒØ§" },
  { emoji: "ğŸ‡¨ğŸ‡­", name: "Ø³ÙˆÙŠØ³Ø±Ø§" },
  { emoji: "ğŸ‡¸ğŸ‡ª", name: "Ø§Ù„Ø³ÙˆÙŠØ¯" },
  { emoji: "ğŸ‡³ğŸ‡´", name: "Ø§Ù„Ù†Ø±ÙˆÙŠØ¬" },
  { emoji: "ğŸ‡©ğŸ‡°", name: "Ø§Ù„Ø¯Ø§Ù†Ù…Ø§Ø±Ùƒ" },
  { emoji: "ğŸ‡®ğŸ‡ª", name: "Ø£ÙŠØ±Ù„Ù†Ø¯Ø§" },
  { emoji: "ğŸ‡¦ğŸ‡¹", name: "Ø§Ù„Ù†Ù…Ø³Ø§" },
  { emoji: "ğŸ‡·ğŸ‡´", name: "Ø±ÙˆÙ…Ø§Ù†ÙŠØ§" },
  { emoji: "ğŸ‡­ğŸ‡·", name: "ÙƒØ±ÙˆØ§ØªÙŠØ§" },
  { emoji: "ğŸ‡ºğŸ‡¦", name: "Ø£ÙˆÙƒØ±Ø§Ù†ÙŠØ§" },
  { emoji: "ğŸ‡·ğŸ‡º", name: "Ø±ÙˆØ³ÙŠØ§" },
  { emoji: "ğŸ‡¹ğŸ‡·", name: "ØªØ±ÙƒÙŠØ§" },
  { emoji: "ğŸ‡¬ğŸ‡ª", name: "Ø¬ÙˆØ±Ø¬ÙŠØ§" },
  { emoji: "ğŸ‡®ğŸ‡±", name: "Ø¥Ø³Ø±Ø§Ø¦ÙŠÙ„" },
  { emoji: "ğŸ‡®ğŸ‡·", name: "Ø¥ÙŠØ±Ø§Ù†" },
  { emoji: "ğŸ‡®ğŸ‡³", name: "Ø§Ù„Ù‡Ù†Ø¯" },
  { emoji: "ğŸ‡µğŸ‡°", name: "Ø¨Ø§ÙƒØ³ØªØ§Ù†" },
  { emoji: "ğŸ‡§ğŸ‡©", name: "Ø¨Ù†ØºÙ„Ø§Ø¯ÙŠØ´" },
  { emoji: "ğŸ‡¨ğŸ‡³", name: "Ø§Ù„ØµÙŠÙ†" },
  { emoji: "ğŸ‡¯ğŸ‡µ", name: "Ø§Ù„ÙŠØ§Ø¨Ø§Ù†" },
  { emoji: "ğŸ‡°ğŸ‡·", name: "ÙƒÙˆØ±ÙŠØ§ Ø§Ù„Ø¬Ù†ÙˆØ¨ÙŠØ©" },
  { emoji: "ğŸ‡µğŸ‡­", name: "Ø§Ù„ÙÙ„Ø¨ÙŠÙ†" },
  { emoji: "ğŸ‡®ğŸ‡©", name: "Ø¥Ù†Ø¯ÙˆÙ†ÙŠØ³ÙŠØ§" },
  { emoji: "ğŸ‡²ğŸ‡¾", name: "Ù…Ø§Ù„ÙŠØ²ÙŠØ§" },
  { emoji: "ğŸ‡¹ğŸ‡­", name: "ØªØ§ÙŠÙ„Ø§Ù†Ø¯" },
  { emoji: "ğŸ‡»ğŸ‡³", name: "ÙÙŠØªÙ†Ø§Ù…" },
  { emoji: "ğŸ‡¸ğŸ‡¬", name: "Ø³Ù†ØºØ§ÙÙˆØ±Ø©" },
  { emoji: "ğŸ‡¦ğŸ‡º", name: "Ø£Ø³ØªØ±Ø§Ù„ÙŠØ§" },
  { emoji: "ğŸ‡³ğŸ‡¿", name: "Ù†ÙŠÙˆØ²ÙŠÙ„Ù†Ø¯Ø§" },
  { emoji: "ğŸ‡²ğŸ‡¬", name: "Ù…Ø¯ØºØ´Ù‚Ø±" },
  { emoji: "ğŸ‡©ğŸ‡¿", name: "Ø§Ù„Ø¬Ø²Ø§Ø¦Ø±" }
];

const emojiList_anime = [
  { emoji: "ğŸœğŸ¥ğŸ‘ŠğŸ˜", name: "Ù†Ø§Ø±ÙˆØªÙˆ" },
  { emoji: "ğŸƒğŸ¤¡ğŸ•·ï¸ğŸ˜„", name: "Ù‡ÙŠØ³ÙˆÙƒØ§" },
  { emoji: "ğŸœğŸ‘‘â˜ ï¸ğŸ‘¿", name: "Ù…ÙŠØ±ÙˆÙŠÙ…" },
  { emoji: "ğŸ‘¨ğŸ»â€ğŸ¦²ğŸ¦¸ğŸ»â€â™‚ï¸ğŸ‘ŠğŸ»ğŸ’¥", name: "ÙˆÙ† Ø¨Ù†Ø´ Ù…Ø§Ù†" },
  { emoji: "ğŸ™ğŸ»â€â™‚ï¸ğŸœï¸âš±ï¸", name: "ØºØ§Ø±Ø§" },
  { emoji: "ğŸ‘¦ğŸ»ğŸ£ğŸ¥¾", name: "ØºÙˆÙ†" },
  { emoji: "ï¸â€â˜ ï¸ğŸ–ğŸ‘’ğŸ˜", name: "Ù„ÙˆÙÙŠ" },
  { emoji: "ğŸŸ¢âš”ï¸ğŸ¶ğŸ§­", name: "Ø²ÙˆØ±Ùˆ" },
  { emoji: "ğŸŒ¸ğŸ©¸ğŸ”¥ğŸ˜ˆ", name: "Ù†ÙŠØ²ÙŠÙƒÙˆ" },
  { emoji: "ğŸ˜ŒğŸ—¡ï¸ğŸŒŠğŸ“¦", name: "ØªØ§Ù†Ø¬ÙŠØ±Ùˆ" },
  { emoji: "ğŸ‘ï¸ğŸ”´ğŸ”¥ğŸ˜", name: "Ù…Ø§Ø¯Ø§Ø±Ø§" },
  { emoji: "ğŸ‘ºğŸ—âš”ï¸ğŸª¨", name: "Ø§ÙŠÙ†ÙˆØ³ÙƒÙŠ" },
  { emoji: "ğŸ˜ˆğŸ““ğŸ–Šï¸ğŸ", name: "Ù„Ø§ÙŠØª" },
  { emoji: "ğŸ“–ğŸ€ğŸ‘¿ğŸ—£ï¸", name: "Ø§Ø³ØªØ§" },
  { emoji: "ğŸ€ğŸ©¸ğŸ‘¿ğŸ˜ ", name: "Ø§ÙƒØ§Ø²Ø§" },
  { emoji: "ğŸšâš¡ğŸ‘ŠğŸ’", name: "ØºÙˆÙƒÙˆ" },
  { emoji: "ğŸ¦â€â¬›ğŸ‘ï¸â˜ï¸ğŸ˜Œ", name: "Ø§ÙŠØªØ§Ø´ÙŠ" }
];

module.exports.Nero = {
  name: "Ø§ÙŠÙ…ÙˆØ¬ÙŠ",
  version: "1.0.0",
  credits: "ğ˜-ğ€ğğğ”",
  description: "ÙØ¹Ø§Ù„ÙŠØ© Ù„Ø¹Ø¨Ø© Ø§Ù„Ø§ÙŠÙ…ÙˆØ¬ÙŠ",
  Role: 0,
  Class: "Ø§Ù„Ø¹Ø§Ø¨"
};

let activeGames = {};
const h = global.Mods.Anbunumbers;
const y = (str) => h(str, 3);



module.exports.Begin = async function ({ api, event, args, usersData, Message: Nero }) {
  const threadID = event.threadID;
  const difficulty = args[0] ? args[0].toLowerCase() : null;

  if (difficulty === "Ø§Ù†Ù‡Ø§Ø¡") {
    if (activeGames[threadID]) {
      delete activeGames[threadID];
      return Nero.reply("â›” ØªÙ… Ø¥Ù†Ù‡Ø§Ø¡ Ù„Ø¹Ø¨Ø© Ø§Ù„Ø¥ÙŠÙ…ÙˆØ¬ÙŠ Ø¨Ù†Ø¬Ø§Ø­");
    } else {
      return Nero.reply("âš ï¸ Ù„Ø§ØªÙˆØ¬Ø¯ Ù„Ø¹Ø¨Ø© Ø´ØºØ§Ù„Ø© ÙÙŠ Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø©");
    }
  }

  const rounds = parseInt(args[0]);
  const level = args[1] ? args[1].toLowerCase() : 'Ø¹Ø§Ø¯ÙŠ';

  if (isNaN(rounds) || rounds < 1)
    return Nero.reply(
  `âœª ÙŠØ±Ø¬Ù‰ ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ø¬ÙˆÙ„Ø§Øª ÙˆØ§Ù„Ù†ÙˆØ¹ Ø¨Ø´ÙƒÙ„ ØµØ­ÙŠØ­ Ù…Ø«Ù„Ø§Ù‹:\nØ§ÙŠÙ…ÙˆØ¬ÙŠ ğŸ­ğŸ¬ Ø³Ù‡Ù„\nØ§ÙŠÙ…ÙˆØ¬ÙŠ ğŸ­ğŸ¬ Ø§Ø¹Ù„Ø§Ù…\n\nâœª Ø§Ù„Ø£Ù†ÙˆØ§Ø¹ Ø§Ù„Ù…ØªÙˆÙØ±Ø©:\nâ€¢ Ø§Ø¹Ù„Ø§Ù… \nâ€¢ Ø§Ù†Ù…ÙŠ \nâ€¢ (Ø³Ù‡Ù„ | Ø¹Ø§Ø¯ÙŠ | ØµØ¹Ø¨)\n\nâœª Ù„Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„Ù„Ø¹Ø¨Ø©: Ø§ÙƒØªØ¨ 'Ø§ÙŠÙ…ÙˆØ¬ÙŠ Ø§Ù†Ù‡Ø§Ø¡' \nâ€¢ Ù„ØªØ®Ø·ÙŠ Ø§Ù„Ø¬ÙˆÙ„Ø©: Ø±Ø¯ Ø¹Ù„Ù‰ Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ø¨Ù€ 'ØªØ®Ø·ÙŠ' \n\nâœª Ø´Ø±Ø­ Ø§Ù„Ø£Ù†ÙˆØ§Ø¹: \nâ€¢ Ø§Ø¹Ù„Ø§Ù…: Ø§Ø¹Ø·ÙŠÙƒ Ø¹Ù„Ù… ÙˆØ§Ù†Øª ØªÙ‚ÙˆÙ„ Ø§Ø³Ù… Ø§Ù„Ø¯ÙˆÙ„Ø© \nâ€¢ Ø£Ù†Ù…ÙŠ: Ø§Ø¹Ø·ÙŠÙƒ Ø§ÙŠÙ…ÙˆØ¬ÙŠØ§Øª Ù„Ø´Ø®ØµÙŠØ© Ø§Ù†Ù…ÙŠ ÙˆØªØ®Ù…Ù† Ø§Ù„Ø§Ø³Ù…`);
  if (activeGames[threadID])
    return Nero.reply("â›” ØªÙˆØ¬Ø¯ Ù„Ø¹Ø¨Ø© Ø´ØºØ§Ù„Ø© ÙÙŠ Ù‡Ø§Ø°Ù‡ Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø©!");

  let selectedList;
  if (level === 'Ø³Ù‡Ù„') {
    selectedList = emojiList_easy;
  } else if (level === 'ØµØ¹Ø¨') {
    selectedList = emojiList_High;
  } else if (level === 'Ø§Ø¹Ù„Ø§Ù…') {
    selectedList = emojiList_banner;
  } else if (level === 'Ø§Ù†Ù…ÙŠ') {
    selectedList = emojiList_anime;
  } else {
    selectedList = emojiList_normal;
  }

  activeGames[threadID] = {
    round: 0,
    totalRounds: rounds,
    scores: {},
    currentAnswer: null,
    messageID: null,
    emojiList: selectedList
  };

  api.sendMessage(
  `ğŸ”¥ | Ù„Ø¹Ø¨Ø© Ø§Ù„Ø¥ÙŠÙ…ÙˆØ¬ÙŠ | ğŸ°ğŸ­\n\nØ¬Ø§Ù‡Ø²ÙŠÙ† ØªØªØ­Ø¯Ø§Ùˆ Ø°ÙƒØ§Ø¡ÙƒÙ…ØŸ\nÙ‡Ø§Ø¯ÙŠ Ù„Ø¹Ø¨Ø© Ù„ÙŠ Ù‚ÙŠØ§Ø³ Ù…Ù† Ø§Ù„Ø§Ø³Ø±Ø¹ Ø¨ÙŠÙ†ÙƒÙ… !\n\nâœ§ Ø§Ù„Ù†ÙˆØ¹ï¸™${level}\nâœ§ Ø¹Ø¯Ø¯ Ø§Ù„Ø¬ÙˆÙ„Ø§Øªï¸™${y(String(rounds))} Ø¬ÙˆÙ„Ø§Øª \nâœ§ Ø§Ù„ØªØ­Ø¯ÙŠï¸™Ø±Ø¯ Ø¹Ù„Ù‰ Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ø¨Ø§Ù„Ø¬ÙˆØ§Ø¨ Ø§Ù„ØµØ­ÙŠØ­ Ù‚Ø¨Ù„ Ø§Ù„Ø¬Ù…ÙŠØ¹!`,
  threadID,
  () => {
    startRound(api, threadID, usersData);
  });
};


function startRound(api, threadID, usersData) {
  const game = activeGames[threadID];
  if (!game) return;

  if (game.round >= game.totalRounds) {
    return endGame(api, threadID, usersData);
  }
  
  let questionText = "Ø´Ùˆ Ø§Ø³Ù… Ø°Ø§ Ø§Ù„Ø¥ÙŠÙ…ÙˆØ¬ÙŠØŸ";
if (game.emojiList === emojiList_banner) {
  questionText = "ÙˆØ´ Ø§Ø³Ù… Ø§Ù„Ø¯ÙˆÙ„Ø© Ø¯ÙŠØŸ";
} else if (game.emojiList === emojiList_anime) {
  questionText = "ÙˆØ´ Ø§Ø³Ù… Ø§Ù„Ø´Ø®ØµÙŠØ© Ø¯ÙŠØŸ";
}
  const { emoji, name } = game.emojiList[Math.floor(Math.random() * game.emojiList.length)];
  game.currentAnswer = name.toLowerCase();
  game.round++;

  api.sendMessage(`Ø§Ù„Ø¬ÙˆÙ„Ø© ${y(String(game.round))}:\n${questionText}\n\n${emoji}`, threadID, (err, info) => {
    if (err) return;
    game.messageID = info.messageID;

    global.Nero.onReply.set(info.messageID, {
      name: module.exports.Nero.name,
      threadID: threadID
    });
  });
}

async function endGame(api, threadID, usersData) {
  const game = activeGames[threadID];
  if (!game) return;

  let result = "ğŸ Ø§Ù„Ù„Ø¹Ø¨Ø© Ø§Ù†ØªÙ‡Øª! Ù‡Ø§Ù‡ÙŠØ§ Ø§Ù„Ù†ØªØ§Ø¦Ø¬:\n";
  let topPlayer = null;
  let maxScore = 0;

  for (const [userID, score] of Object.entries(game.scores)) {
    const userName = await usersData.getName(userID);
    result += `â€¢ ${userName}: ${y(String(score))} Ù†Ù‚Ø·Ø©\n`;

    if (score > maxScore) {
      maxScore = score;
      topPlayer = userID;
    }
  }

  result += topPlayer
    ? `\nØ§Ù„ÙØ§Ø¦Ø²: ${await usersData.getName(topPlayer)} Ø¨Ù€Ù€ ${y(String(maxScore))} Ù†Ù‚Ø·Ø©! ğŸ‰`
    : "\nÙ„Ø§ ÙŠÙˆØ¬Ø¯ ÙØ§Ø¦Ø²ØŒ ØªØ¹Ø§Ø¯Ù„.";

  if (topPlayer) {
    const currentMoney = await usersData.get(topPlayer, "money") || 0;
    await usersData.set(topPlayer, currentMoney + 1000, "money");

    api.sendMessage({
      body: `ğŸ‰ Ù…Ø¨Ø±ÙˆÙƒ ${await usersData.getName(topPlayer)}! Ø­ØµÙ„Øª Ø¹Ù„Ù‰ ğŸ­ğŸ¬ğŸ¬ğŸ¬ Ù†Ù‚Ø·Ø© Ø¬Ø§Ø¦Ø²Ø© Ù„ÙÙˆØ²Ùƒ ÙÙŠ Ø¢Ø®Ø± Ù„Ø¹Ø¨Ø©! ğŸ`,
    }, threadID);
  }

  api.sendMessage(result, threadID);
  delete activeGames[threadID];
}


module.exports.onReply = async function ({ api, event, usersData }) {
  const threadID = event.threadID;
  const game = activeGames[threadID];
  if (!game || !game.currentAnswer) return;

  const userAnswer = event.body.trim().toLowerCase();
  if (userAnswer === "ØªØ®Ø·ÙŠ") {
    const senderID = event.senderID;
    const userName = await usersData.getName(senderID);
    
    api.sendMessage({
  body: `â© ${userName} ØªØ®Ø·ÙŠØª Ø§Ù„Ø¬ÙˆÙ„Ø© Ù†Ù…Ø± Ù„Ù„Ø¬ÙˆÙ„Ø© Ø§Ù„ØªØ§Ù„ÙŠØ©!`,
  mentions: [{
    tag: userName,
    id: senderID  
  }]
}, threadID, () => startRound(api, threadID, usersData));
    return;
  }
  if (userAnswer === game.currentAnswer) {
    const senderID = event.senderID;
    const userName = await usersData.getName(senderID);

    game.scores[senderID] = (game.scores[senderID] || 0) + 1;
    global.Nero.onReply.delete(game.messageID);

    api.unsendMessage(game.messageID);
    game.currentAnswer = null;

    return api.sendMessage({
  body: `âœ… Ù…Ø¨Ø±ÙˆÙƒ ${userName}! Ø¬ÙˆØ§Ø¨Ùƒ ØµØ­ÙŠØ­ ÙˆÙƒØ³Ø¨Øª\t${y("1")}\tÙ†Ù‚Ø·Ø©`,
  mentions: [{
    tag: userName,
    id: senderID
  }]
}, threadID, () => startRound(api, threadID, usersData));
  }
};